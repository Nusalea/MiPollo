(this["webpackJsonpmi-pollo"]=this["webpackJsonpmi-pollo"]||[]).push([[0],{118:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(11),r=a.n(c),o=a(99),i=a(191),l=a(176),s=a(47),d=a(13),j=a(174),u=a(192),b=a(171),O=Object(n.createContext)(),p=a(2),m=Object(b.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},toolbar:{display:"flex",justifyContent:"center",alignItems:"center"},datePicker:{backgroundColor:"#fff",borderRadius:5,padding:8}}})),h=function(){var e=m(),t=Object(n.useContext)(O),a=t.fecha,c=t.handleChangeFecha;return Object(p.jsx)(j.a,{position:"fixed",className:e.appBar,children:Object(p.jsx)(l.a,{className:e.toolbar,children:Object(p.jsx)(u.a,{className:e.datePicker,type:"date",value:a,InputLabelProps:{shrink:!0},onChange:c})})})},f=a(194),g=a(178),x=a(177),v=a(179),C=a(180),S=a(181),y=a(97),N=a.n(y),w=a(98),I=a.n(w),P=a(96),k=a.n(P),F=(a(118),Object(b.a)({root:{backgroundColor:"red"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,padding:"0 10px"},listItem:{borderRadius:10}})),E=function(){var e=F();return Object(p.jsxs)(f.a,{variant:"permanent",className:e.drawer,open:!0,classes:{paper:e.drawerPaper},children:[Object(p.jsx)(l.a,{}),Object(p.jsx)(g.a,{}),Object(p.jsxs)(x.a,{children:[Object(p.jsx)(s.b,{to:"/clientes",children:Object(p.jsxs)(v.a,{button:!0,className:e.listItem,children:[Object(p.jsx)(C.a,{children:Object(p.jsx)(k.a,{})}),Object(p.jsx)(S.a,{primary:"Clientes"})]})}),Object(p.jsx)(s.b,{to:"/",children:Object(p.jsxs)(v.a,{button:!0,className:e.listItem,children:[Object(p.jsx)(C.a,{children:Object(p.jsx)(N.a,{})}),Object(p.jsx)(S.a,{primary:"Hoja de Pedidos"})]})}),Object(p.jsx)(s.b,{to:"/pagos",children:Object(p.jsxs)(v.a,{button:!0,className:e.listItem,children:[Object(p.jsx)(C.a,{children:Object(p.jsx)(I.a,{})}),Object(p.jsx)(S.a,{primary:"Pagos"})]})})]})]})},J=a(15),B=function(e){var t=e.children,a=Object(n.useState)("aaaa-mm-dd"),c=Object(J.a)(a,2),r=c[0],o=c[1];return Object(n.useEffect)((function(){if(localStorage.getItem("fecha"))o(localStorage.getItem("fecha"));else{var e=(new Date).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-");o(e)}}),[]),Object(p.jsx)(O.Provider,{value:{fecha:r,handleChangeFecha:function(e){o(e.target.value),localStorage.setItem("fecha",e.target.value)}},children:t})},q=a(10),A=a(183),D=a(184),T=a(195),z=a(193),H=a(182),L=Object(b.a)((function(e){return{modal:{position:"absolute",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},modalContainer:{display:"flex",alignItems:"center",justifyContent:"center"},form:{display:"flex",flexWrap:"wrap","& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),M=function(e){var t=e.open,a=e.handleOpen,n=e.handleSubmit,c=e.children,r=e.titleForm,o=L();return Object(p.jsx)(z.a,{open:t,onClose:a,className:o.modalContainer,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(p.jsxs)(H.a,{variant:"outlined",className:o.modal,children:[Object(p.jsx)("h2",{id:"simple-modal-title",children:r}),Object(p.jsx)("form",{id:"simple-modal-description",className:o.form,onSubmit:n,children:c})]})})},R=a(50),G=function(e,t){var a=Object(n.useState)(e),c=Object(J.a)(a,2),r=c[0],o=c[1];Object(n.useEffect)((function(){o(Object(q.a)({},t))}),[t]);return{form:r,handleChange:function(e){return function(t){"checkbox"===t.target.type?o(Object(q.a)(Object(q.a)({},r),{},Object(R.a)({},e,t.target.checked))):o(Object(q.a)(Object(q.a)({},r),{},Object(R.a)({},e,t.target.value)))}},limpiarForm:function(){null!==!t&&o(Object(q.a)({},e))}}},Q=a(33),W=a.n(Q),K=a(51),U=a(52),V=a.n(U),X="https://610f216b9b698d00171752a0.mockapi.io",Y=function(){var e=Object(K.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.get("".concat(X,"/cliente"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(K.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.get("".concat(X,"/cliente?estado=true"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(K.a)(W.a.mark((function e(t){var a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.post("".concat(X,"/cliente"),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(K.a)(W.a.mark((function e(t){var a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.put("".concat(X,"/cliente/").concat(t.id),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(n.useState)(!1),t=Object(J.a)(e,2),a=t[0],c=t[1];return{open:a,handleOpen:function(){c(!a)}}},te={nombre:"",precio:"",saldo:"",estado:!0},ae=function(e){var t=e.addCliente,a=G(Object(q.a)({},te)),n=a.form,c=a.handleChange,r=a.limpiarForm,o=ee(),i=o.open,l=o.handleOpen;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:Object(p.jsx)(A.a,{variant:"contained",color:"primary",onClick:l,children:"Nuevo"})}),Object(p.jsxs)(M,{open:i,handleOpen:l,handleSubmit:function(e){e.preventDefault(),$(Object(q.a)({},n)).then((function(e){201===e.request.status&&(l(),r(),t(e.data))}))},children:[Object(p.jsx)(u.a,{label:"Nombre",value:n.nombre,onChange:c("nombre")}),Object(p.jsx)(u.a,{label:"Camal",value:n.camal,onChange:c("camal")}),Object(p.jsx)(D.a,{control:Object(p.jsx)(T.a,{checked:n.estado,onChange:c("estado"),name:"estado",color:"primary"}),label:n.estado?"Activo":"Desactivo"}),Object(p.jsx)(A.a,{variant:"contained",color:"primary",type:"submit",children:"Guardar"}),Object(p.jsx)(A.a,{variant:"outlined",color:"primary",onClick:function(){r(),l()},children:"Cancelar"})]})]})},ne=a(32),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useContext)(O),a=t.fecha,c=Object(n.useState)([]),r=Object(J.a)(c,2),o=r[0],i=r[1],l=function(e){i([].concat(Object(ne.a)(o),[e]))},s=function(){Z().then((function(e){200===e.request.status&&(i(e.data),localStorage.setItem("clientes",JSON.stringify(e.data)))})).catch((function(e){localStorage.getItem("clientes")&&i(JSON.parse(localStorage.getItem("clientes")))}))},d=function(){Y().then((function(e){200===e.request.status&&(i(e.data),localStorage.setItem("clientesActive",JSON.stringify(e.data)))})).catch((function(e){localStorage.getItem("clientesActive")&&i(JSON.parse(localStorage.getItem("clientesActive")))}))};return Object(n.useEffect)((function(){e?s():d()}),[a]),{clientes:o,addCliente:l,loadAllClientes:d,loadClientesActive:s}},re=function(e){var t=e.loadClientes,a=e.open,n=e.handleOpen,c=e.clienteEdit,r=G(null,c),o=r.form,i=r.handleChange;return Object(p.jsx)(p.Fragment,{children:o?Object(p.jsxs)(M,{open:a,handleOpen:n,handleSubmit:function(e){e.preventDefault(),_(Object(q.a)({},o)).then((function(e){200===e.request.status&&(n(),t())}))},children:[Object(p.jsx)(u.a,{label:"Nombre",value:o.nombre,onChange:i("nombre")}),Object(p.jsx)(u.a,{label:"Camal",value:o.camal,onChange:i("camal")}),Object(p.jsx)(D.a,{control:Object(p.jsx)(T.a,{checked:o.estado,onChange:i("estado"),name:"estado",color:"primary"}),label:o.estado?"Activo":"Desactivo"}),Object(p.jsx)(A.a,{variant:"contained",color:"primary",type:"submit",children:"Guardar"}),Object(p.jsx)(A.a,{variant:"outlined",color:"primary",onClick:function(){n()},children:"Cancelar"})]}):null})},oe=a(185),ie=a(186),le=a(187),se=a(188),de=a(189),je=a(190),ue=function(e){var t=e.clientes,a=e.handleOpen,n=e.setClienteEdit;return Object(p.jsx)(oe.a,{children:Object(p.jsxs)(ie.a,{size:"small","aria-label":"a dense table",children:[Object(p.jsx)(le.a,{children:Object(p.jsx)(se.a,{children:["Nombre","Camal","Estado"].map((function(e){return Object(p.jsx)(de.a,{children:e},e)}))})}),Object(p.jsx)(je.a,{children:t.map((function(e,t){return Object(p.jsx)(se.a,{onClick:function(){n(Object(q.a)({},e)),a()},children:["nombre","camal","estado"].map((function(a,n){return"estado"===a?Object(p.jsx)(de.a,{children:!0===e[a]?"Activo":"Desactivo"},"column".concat(t).concat(n)):Object(p.jsx)(de.a,{children:e[a]},"column".concat(t).concat(n))}))},"row".concat(t))}))})]})})},be=function(){var e=ce(),t=e.clientes,a=e.addCliente,c=e.loadAllClientes,r=Object(n.useState)(null),o=Object(J.a)(r,2),i=o[0],l=o[1],s=ee(),d=s.open,j=s.handleOpen;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ae,{addCliente:a}),Object(p.jsx)(re,{open:d,handleOpen:j,clienteEdit:i,loadClientes:c}),Object(p.jsx)(ue,{clientes:t,handleOpen:j,setClienteEdit:l})]})},Oe=a(66),pe=a.n(Oe),me=Object(b.a)((function(e){return{containerButtons:{display:"flex",gap:"20px"},table:{width:"790px"},row0:{backgroundColor:"#E7ECEF"},row1:{backgroundColor:"#E0F5EB"},row2:{backgroundColor:"#FAF5B2"},row3:{backgroundColor:"#B7D9F5"},bodyCell:{width:"200px"},inputCell:{width:"250px",padding:"0",margin:"0","& *":{padding:"5px",margin:"0",backgroundColor:"transparent"},"& .MuiFormControl-root.MuiTextField-root":{padding:"0"}}}})),he={importePerla:0,totalPagos:0,diferencia:0},fe=function(){var e=ce().clientes,t=Object(n.useState)([]),a=Object(J.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(Object(q.a)({},he)),i=Object(J.a)(o,2),l=i[0],s=i[1],d=me(),j=Object(n.useRef)();return Object(n.useEffect)((function(){localStorage.getItem("pagos")&&r([].concat(Object(ne.a)(c),Object(ne.a)(JSON.parse(localStorage.getItem("pagos"))))),localStorage.getItem("hojaPagos")&&s(JSON.parse(localStorage.getItem("hojaPagos")))}),[]),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:d.containerButtons,children:[Object(p.jsx)(u.a,{label:"Total Pagos",value:l.totalPagos,type:"number"}),Object(p.jsx)(u.a,{label:"Perla",value:0!==l.importePerla?l.importePerla:"",onChange:function(e){var t=Object(q.a)({},l);t.importePerla=parseFloat(e.target.value),t.diferencia=t.totalPagos-t.importePerla,localStorage.setItem("hojaPagos",JSON.stringify(t)),s(t)},type:"number"}),Object(p.jsx)(u.a,{label:"Diferencia",value:0!==l.diferencia?l.diferencia:"",type:"number"}),Object(p.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){localStorage.removeItem("pagos"),localStorage.removeItem("hojaPagos"),s(Object(q.a)({},he)),r([])},children:"Limpiar Hoja"}),Object(p.jsx)(pe.a,{trigger:function(){return Object(p.jsx)(A.a,{variant:"contained",color:"primary",children:"Imprimir"})},content:function(){return j.current}})]}),Object(p.jsx)(oe.a,{ref:j,className:d.table,children:Object(p.jsxs)(ie.a,{size:"small","aria-label":"a dense table",children:[Object(p.jsx)(le.a,{children:Object(p.jsx)(se.a,{children:["Clientes","Banco"].map((function(e){return Object(p.jsx)(de.a,{children:e},e)}))})}),Object(p.jsx)(je.a,{children:e.map((function(e,t){return Object(p.jsxs)(se.a,{className:d["row".concat(t%4)],children:[Object(p.jsx)(de.a,{className:d.bodyCell,children:e.nombre}),Object(p.jsx)(de.a,{className:d.inputCell,children:Object(p.jsx)(u.a,{size:"small",variant:"filled",type:"number",value:c[t]?c[t]:"",onChange:function(e){!function(e,t){var a=Object(ne.a)(c),n=Object(q.a)({},l);a[e]=t.target.value;var o=a.reduce((function(e,t){return e+(t?parseFloat(t):0)}),0);n.totalPagos=o,n.diferencia=n.totalPagos-n.importePerla,localStorage.setItem("pagos",JSON.stringify(a)),localStorage.setItem("hojaPagos",JSON.stringify(n)),r(a),s(n)}(t,e)}})})]},t)}))})]})})]})},ge={total:0,queda:0},xe=Object(b.a)((function(e){return{containerButtons:{display:"flex",gap:"20px"},table:{width:"790px"},row0:{backgroundColor:"#E7ECEF"},row1:{backgroundColor:"#E0F5EB"},row2:{backgroundColor:"#FAF5B2"},row3:{backgroundColor:"#B7D9F5"},bodyCell:{width:"200px"},inputCell:{width:"250px",padding:"0",margin:"0","& *":{padding:"5px",margin:"0",backgroundColor:"transparent"},"& .MuiFormControl-root.MuiTextField-root":{padding:"0"}}}})),ve=function(){var e=function(){var e=ce(!0).clientes,t=Object(n.useState)(Object(q.a)({},ge)),a=Object(J.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)([]),i=Object(J.a)(o,2),l=i[0],s=i[1];return Object(n.useEffect)((function(){localStorage.getItem("hojaPedido")&&r(Object(q.a)(Object(q.a)({},c),JSON.parse(localStorage.getItem("hojaPedido")))),localStorage.getItem("pedidos")&&s([].concat(Object(ne.a)(l),Object(ne.a)(JSON.parse(localStorage.getItem("pedidos")))))}),[]),{hojaPedido:c,pedidos:l,clientes:e,handlePedido:function(e,t){var a,n=function(e){var t=0;return e.trim().toLowerCase().split("+").forEach((function(e){var a=e.indexOf("m"),n=e.indexOf("h");-1!==a&&(t+=1*e.substring(0,a)),-1!==n&&(t+=1*e.substring(0,n))})),t}(t.target.value),o=0;o=1*c.queda-n,l[e]&&(o+=l[e].total),o>=0?(l[e]={pedidoString:t.target.value,total:n},r(Object(q.a)(Object(q.a)({},c),{},{queda:o})),localStorage.setItem("pedidos",JSON.stringify(l)),localStorage.setItem("hojaPedido",JSON.stringify(Object(q.a)(Object(q.a)({},c),{},{queda:o})))):t.target.value=(null===(a=l[e])||void 0===a?void 0:a.pedidoString)||0},handleTotal:function(e){if(1*e.target.value>=0){var t=1*e.target.value,a=t-c.total+c.queda;r(Object(q.a)(Object(q.a)({},c),{},{total:t,queda:a})),localStorage.setItem("hojaPedido",JSON.stringify(c))}},limpiarHoja:function(){localStorage.removeItem("hojaPedido"),localStorage.removeItem("pedidos"),r(Object(q.a)({},ge)),s([])}}}(),t=e.hojaPedido,a=e.pedidos,c=e.clientes,r=e.handlePedido,o=e.handleTotal,i=e.limpiarHoja,l=xe(),s=Object(n.useRef)();return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:l.containerButtons,children:[Object(p.jsx)(u.a,{label:"Total",value:0!==t.total?t.total:"",placeholder:"0",onChange:o,type:"number"}),Object(p.jsx)(u.a,{label:"Queda",value:0!==t.queda?t.queda:"",type:"number"}),Object(p.jsx)(A.a,{variant:"contained",color:"primary",onClick:i,children:"Limpiar Hoja"}),Object(p.jsx)(pe.a,{trigger:function(){return Object(p.jsx)(A.a,{variant:"contained",color:"primary",children:"Imprimir"})},content:function(){return s.current}})]}),Object(p.jsx)(oe.a,{ref:s,className:l.table,children:Object(p.jsxs)(ie.a,{size:"small","aria-label":"a dense table",children:[Object(p.jsx)(le.a,{children:Object(p.jsx)(se.a,{children:["Clientes","N\xb0 de jabas","Camal"].map((function(e){return Object(p.jsx)(de.a,{children:e},e)}))})}),Object(p.jsx)(je.a,{children:c.map((function(e,t){var n,c;return Object(p.jsxs)(se.a,{className:l["row".concat(t%4)],children:[Object(p.jsx)(de.a,{className:l.bodyCell,children:e.nombre}),Object(p.jsx)(de.a,{className:l.inputCell,children:Object(p.jsx)(u.a,{size:"small",variant:"filled",value:void 0===(null===(n=a[t])||void 0===n?void 0:n.pedidoString)||null===(null===(c=a[t])||void 0===c?void 0:c.pedidoString)?"":a[t].pedidoString,onChange:function(e){r(t,e)}})}),Object(p.jsx)(de.a,{children:e.camal})]},t)}))})]})})]})},Ce=Object(b.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3)}}})),Se=Object(o.a)({palette:{primary:{main:"#212121"},secondary:{main:"#fff"}}}),ye=function(){var e=Ce();return Object(p.jsx)(i.a,{theme:Se,children:Object(p.jsx)(B,{children:Object(p.jsx)(s.a,{children:Object(p.jsxs)("div",{className:e.root,children:[Object(p.jsx)(h,{}),Object(p.jsx)(E,{}),Object(p.jsxs)("div",{className:e.content,children:[Object(p.jsx)(l.a,{}),Object(p.jsxs)(d.c,{children:[Object(p.jsx)(d.a,{path:"/clientes",children:Object(p.jsx)(be,{})}),Object(p.jsx)(d.a,{path:"/pagos",children:Object(p.jsx)(fe,{})}),Object(p.jsx)(d.a,{path:"/",children:Object(p.jsx)(ve,{})})]})]})]})})})})};a(141);r.a.render(Object(p.jsx)(ye,{}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.14fef1eb.chunk.js.map