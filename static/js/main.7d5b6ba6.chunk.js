(this["webpackJsonpmi-pollo"]=this["webpackJsonpmi-pollo"]||[]).push([[0],{122:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(11),c=a.n(r),o=a(104),i=a(196),l=a(179),s=a(41),d=a(15),j=a(177),u=a(197),b=a(174),p=Object(n.createContext)(),h=a(2),O=Object(b.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},toolbar:{display:"flex",justifyContent:"center",alignItems:"center"},datePicker:{backgroundColor:"#fff",borderRadius:5,padding:8}}})),m=function(){var e=O(),t=Object(n.useContext)(p),a=t.fecha,r=t.handleChangeFecha;return Object(h.jsx)(j.a,{position:"fixed",className:e.appBar,children:Object(h.jsx)(l.a,{className:e.toolbar,children:Object(h.jsx)(u.a,{className:e.datePicker,type:"date",value:a,InputLabelProps:{shrink:!0},onChange:r})})})},x=a(200),f=a(181),g=a(180),v=a(182),y=a(183),C=a(184),S=a(101),N=a.n(S),P=a(102),w=a.n(P),I=a(100),k=a.n(I),A=a(103),F=a.n(A),E=a(69),J=a.n(E),T=(a(122),Object(b.a)({root:{backgroundColor:"red"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,padding:"0 10px"},listItem:{borderRadius:10}})),D=function(){var e=T();return Object(h.jsxs)(x.a,{variant:"permanent",className:e.drawer,open:!0,classes:{paper:e.drawerPaper},children:[Object(h.jsx)(l.a,{}),Object(h.jsx)(f.a,{}),Object(h.jsxs)(g.a,{children:[Object(h.jsx)(s.b,{to:"/clientes",children:Object(h.jsxs)(v.a,{button:!0,className:e.listItem,children:[Object(h.jsx)(y.a,{children:Object(h.jsx)(k.a,{})}),Object(h.jsx)(C.a,{primary:"Clientes"})]})}),Object(h.jsx)(s.b,{to:"/",children:Object(h.jsxs)(v.a,{button:!0,className:e.listItem,children:[Object(h.jsx)(y.a,{children:Object(h.jsx)(N.a,{})}),Object(h.jsx)(C.a,{primary:"Hoja de Pedidos"})]})}),Object(h.jsx)(s.b,{to:"/pagos",children:Object(h.jsxs)(v.a,{button:!0,className:e.listItem,children:[Object(h.jsx)(y.a,{children:Object(h.jsx)(w.a,{})}),Object(h.jsx)(C.a,{primary:"Pagos"})]})}),Object(h.jsx)(s.b,{to:"/importarpedidos",children:Object(h.jsxs)(v.a,{button:!0,className:e.listItem,children:[Object(h.jsx)(y.a,{children:Object(h.jsx)(F.a,{})}),Object(h.jsx)(C.a,{primary:"Importar pedidos"})]})}),Object(h.jsx)(s.b,{to:"/alerta",children:Object(h.jsxs)(v.a,{button:!0,className:e.listItem,children:[Object(h.jsx)(y.a,{children:Object(h.jsx)(J.a,{})}),Object(h.jsx)(C.a,{primary:"Alerta"})]})})]})]})},L=a(14),z=function(e){var t=e.children,a=Object(n.useState)("aaaa-mm-dd"),r=Object(L.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){if(localStorage.getItem("fecha"))o(localStorage.getItem("fecha"));else{var e=(new Date).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-");o(e)}}),[]),Object(h.jsx)(p.Provider,{value:{fecha:c,handleChangeFecha:function(e){o(e.target.value),localStorage.setItem("fecha",e.target.value)}},children:t})},q=a(8),R=a(186),B=a(187),H=a(188),M=a(201),G=a(198),W=a(185),Q=Object(b.a)((function(e){return{modal:{position:"absolute",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},modalContainer:{display:"flex",alignItems:"center",justifyContent:"center"},form:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap","& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"},width:"700px"}}})),U=function(e){var t=e.open,a=e.handleOpen,n=e.handleSubmit,r=e.children,c=e.titleForm,o=Q();return Object(h.jsx)(G.a,{open:t,onClose:a,className:o.modalContainer,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(h.jsxs)(W.a,{variant:"outlined",className:o.modal,children:[Object(h.jsx)("h2",{id:"simple-modal-title",children:c}),Object(h.jsx)("form",{id:"simple-modal-description",className:o.form,onSubmit:n,children:r})]})})},K=a(45),V=function(e,t){var a=Object(n.useState)(e),r=Object(L.a)(a,2),c=r[0],o=r[1];Object(n.useEffect)((function(){o(Object(q.a)({},t))}),[t]);return{form:c,handleChange:function(e){return function(t){"checkbox"===t.target.type?o(Object(q.a)(Object(q.a)({},c),{},Object(K.a)({},e,t.target.checked))):o(Object(q.a)(Object(q.a)({},c),{},Object(K.a)({},e,t.target.value.trim())))}},limpiarForm:function(){null!==!t&&o(Object(q.a)({},e))}}},X=a(13),Y=a.n(X),Z=a(18),$=a(19),_=a.n($),ee="https://610f216b9b698d00171752a0.mockapi.io",te="http://localhost:4000",ae=function(){var e=Object(Z.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(ee,"/cliente"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(Z.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(ee,"/cliente?estado=true"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(Z.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(ee,"/cliente?paymentSheet=true"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.post("".concat(ee,"/cliente"),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.put("".concat(ee,"/cliente/").concat(t.id),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(n.useState)(!1),t=Object(L.a)(e,2),a=t[0],r=t[1];return{open:a,handleOpen:function(){r(!a)}}},le={nombre:"",nombrePrograma:"",price:"",estado:!0,paymentSheet:!0,joinActive:!0,camal:"",client:""},se=function(e){var t=e.addCliente,a=V(Object(q.a)({},le)),n=a.form,r=a.handleChange,c=a.limpiarForm,o=ie(),i=o.open,l=o.handleOpen;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Object(h.jsx)(R.a,{variant:"contained",color:"primary",onClick:l,children:"Nuevo"})}),Object(h.jsxs)(U,{open:i,handleOpen:l,handleSubmit:function(e){e.preventDefault(),ce(Object(q.a)({},n)).then((function(e){201===e.request.status&&(l(),c(),t(e.data))}))},children:[Object(h.jsx)(u.a,{label:"Nombre",value:n.nombre,onChange:r("nombre")}),Object(h.jsx)(u.a,{label:"Camal",value:n.camal,onChange:r("camal")}),Object(h.jsx)(u.a,{label:"Nombre Programa",value:n.nombrePrograma,onChange:r("nombrePrograma")}),Object(h.jsx)(u.a,{label:"Precio extra",type:"number",value:n.price,onChange:r("price"),InputProps:{startAdornment:Object(h.jsx)(B.a,{position:"start",children:"S/."})}}),Object(h.jsx)(u.a,{label:"Pertenece a",value:n.client,onChange:r("client")}),Object(h.jsx)(H.a,{control:Object(h.jsx)(M.a,{checked:n.estado,onChange:r("estado"),name:"estado",color:"primary"}),label:"Hoja pedidos"}),Object(h.jsx)(H.a,{control:Object(h.jsx)(M.a,{checked:n.paymentSheet,onChange:r("paymentSheet"),name:"paymentSheet",color:"primary"}),label:"Hoja pagos"}),Object(h.jsx)(H.a,{control:Object(h.jsx)(M.a,{checked:n.joinActive,onChange:r("joinActive"),name:"joinActive",color:"primary"}),label:"Sumar"}),Object(h.jsx)(R.a,{variant:"contained",color:"primary",type:"submit",children:"Guardar"}),Object(h.jsx)(R.a,{variant:"outlined",color:"primary",onClick:function(){c(),l()},children:"Cancelar"})]})]})},de=a(46),je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=Object(n.useState)([]),a=Object(L.a)(t,2),r=a[0],c=a[1],o=function(e){c([].concat(Object(de.a)(r),[e]))},i=function(){ne().then((function(e){200===e.request.status&&(c(e.data),localStorage.setItem("clientesActive",JSON.stringify(e.data)))})).catch((function(e){localStorage.getItem("clientesActive")&&c(JSON.parse(localStorage.getItem("clientesActive")))}))},l=function(){re().then((function(e){200===e.request.status&&(c(e.data),localStorage.setItem("clientesPaymentSheet",JSON.stringify(e.data)))})).catch((function(e){localStorage.getItem("clientesPaymentSheet")&&c(JSON.parse(localStorage.getItem("clientesPaymentSheet")))}))},s=function(){ae().then((function(e){200===e.request.status&&(c(e.data),localStorage.setItem("clientes",JSON.stringify(e.data)))})).catch((function(e){localStorage.getItem("clientes")&&c(JSON.parse(localStorage.getItem("clientes")))}))};return Object(n.useEffect)((function(){switch(e){case"active":i();break;case"payment":l();break;default:s()}}),[]),{clientes:r,addCliente:o,loadAllClientes:s,loadClientesActive:i,loadClientesPaymentSheet:l}},ue=function(e){var t=e.loadClientes,a=e.open,n=e.handleOpen,r=e.clienteEdit,c=V(null,r),o=c.form,i=c.handleChange;return Object(h.jsx)(h.Fragment,{children:o?Object(h.jsxs)(U,{open:a,handleOpen:n,handleSubmit:function(e){e.preventDefault(),oe(Object(q.a)({},o)).then((function(e){200===e.request.status&&(n(),t())}))},children:[Object(h.jsx)(u.a,{label:"Nombre",value:o.nombre,onChange:i("nombre")}),Object(h.jsx)(u.a,{label:"Camal",value:o.camal,onChange:i("camal")}),Object(h.jsx)(u.a,{label:"Nombre Programa",value:o.nombrePrograma,onChange:i("nombrePrograma")}),Object(h.jsx)(u.a,{label:"Precio extra",type:"number",value:o.price,onChange:i("price"),InputProps:{startAdornment:Object(h.jsx)(B.a,{position:"start",children:"S/."})}}),Object(h.jsx)(u.a,{label:"Pertenece a",value:o.client,onChange:i("client")}),Object(h.jsx)(H.a,{control:Object(h.jsx)(M.a,{checked:o.estado,onChange:i("estado"),name:"estado",color:"primary"}),label:"Hoja pedidos"}),Object(h.jsx)(H.a,{control:Object(h.jsx)(M.a,{checked:o.paymentSheet,onChange:i("paymentSheet"),name:"paymentSheet",color:"primary"}),label:"Hoja pagos"}),Object(h.jsx)(H.a,{control:Object(h.jsx)(M.a,{checked:o.joinActive,onChange:i("joinActive"),name:"joinActive",color:"primary"}),label:"Sumar"}),Object(h.jsx)(R.a,{variant:"contained",color:"primary",type:"submit",children:"Guardar"}),Object(h.jsx)(R.a,{variant:"outlined",color:"primary",onClick:function(){n()},children:"Cancelar"})]}):null})},be=a(190),pe=a(191),he=a(192),Oe=a(193),me=a(194),xe=a(195),fe=function(e){var t=e.clientes,a=e.handleOpen,n=e.setClienteEdit;return Object(h.jsx)(be.a,{children:Object(h.jsxs)(pe.a,{size:"small","aria-label":"a dense table",children:[Object(h.jsx)(he.a,{children:Object(h.jsx)(Oe.a,{children:["Nombre","Camal","Hoja Pedido","Nombre Programa","Precio extra","Sumar","Hoja Pago"].map((function(e){return Object(h.jsx)(me.a,{children:e},e)}))})}),Object(h.jsx)(xe.a,{children:t.map((function(e,t){return Object(h.jsx)(Oe.a,{onClick:function(){n(Object(q.a)({},e)),a()},children:["nombre","camal","estado","nombrePrograma","price","joinActive","paymentSheet"].map((function(a,n){return"estado"===a||"paymentSheet"===a||"joinActive"===a?Object(h.jsx)(me.a,{children:!0===e[a]?"Activo":"Desactivo"},"column".concat(t).concat(n)):Object(h.jsx)(me.a,{children:e[a]},"column".concat(t).concat(n))}))},"row".concat(t))}))})]})})},ge=function(){var e=je(),t=e.clientes,a=e.addCliente,r=e.loadAllClientes,c=Object(n.useState)(null),o=Object(L.a)(c,2),i=o[0],l=o[1],s=ie(),d=s.open,j=s.handleOpen;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(se,{addCliente:a}),Object(h.jsx)(ue,{open:d,handleOpen:j,clienteEdit:i,loadClientes:r}),Object(h.jsx)(fe,{clientes:t,handleOpen:j,setClienteEdit:l})]})},ve=a(72),ye=a.n(ve),Ce=Object(b.a)((function(e){return{containerButtons:{display:"flex",gap:"20px"},table:{width:"790px"},row0:{backgroundColor:"#E7ECEF"},row1:{backgroundColor:"#E0F5EB"},row2:{backgroundColor:"#FAF5B2"},row3:{backgroundColor:"#B7D9F5"},bodyCell:{width:"200px"},inputCell:{width:"250px",padding:"0",margin:"0","& *":{padding:"5px",margin:"0",backgroundColor:"transparent"},"& .MuiFormControl-root.MuiTextField-root":{padding:"0"}}}})),Se={importePerla:0,totalPagos:0,pagosFalto:0,saldoAnterior:0,pollosMuertos:0,saldoActual:0},Ne=function(){var e=je("payment").clientes,t=Object(n.useState)([]),a=Object(L.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(Object(q.a)({},Se)),i=Object(L.a)(o,2),l=i[0],s=i[1],d=Ce(),j=Object(n.useRef)(),b=function(e){var t=Object(q.a)({},l);t[e.target.name]=e.target.value,t.saldoActual=p(t),localStorage.setItem("hojaPagos",JSON.stringify(t)),localStorage.setItem("saldoAnterior",t.saldoActual),s(t)},p=function(e){var t=e.totalPagos,a=e.pagosFalto,n=e.pollosMuertos,r=e.saldoAnterior,c=e.importePerla,o=0;return o+=""===t||isNaN(t)?0:parseFloat(t),o+=""===a||isNaN(a)?0:parseFloat(a),o+=""===n||isNaN(n)?0:parseFloat(n),o+=""===r||isNaN(r)?0:parseFloat(r),(o-=""===c||isNaN(c)?0:parseFloat(c)).toFixed(2)},O=function(e){var t=0;return e.trim().toLowerCase().split("+").forEach((function(e){t+=""!==e&&parseFloat(e)})),t};return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:d.containerButtons,children:[Object(h.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){localStorage.removeItem("pagos"),c([])},children:"Limpiar Hoja"}),Object(h.jsx)(ye.a,{trigger:function(){return Object(h.jsx)(R.a,{variant:"contained",color:"primary",children:"Imprimir"})},content:function(){return j.current}})]}),Object(h.jsx)(be.a,{ref:j,className:d.table,children:Object(h.jsxs)(pe.a,{size:"small","aria-label":"a dense table",children:[Object(h.jsx)(he.a,{children:Object(h.jsx)(Oe.a,{children:["Clientes","Pagos del d\xeda","Total"].map((function(e){return Object(h.jsx)(me.a,{children:e},e)}))})}),Object(h.jsxs)(xe.a,{children:[e.map((function(e,t){var a,n,o,i;return Object(h.jsxs)(Oe.a,{className:d["row".concat(t%4)],children:[Object(h.jsx)(me.a,{className:d.bodyCell,children:e.nombre}),Object(h.jsx)(me.a,{className:d.inputCell,children:Object(h.jsx)(u.a,{size:"small",variant:"filled",value:(null===(a=r[t])||void 0===a?void 0:a.pagoString)?null===(n=r[t])||void 0===n?void 0:n.pagoString:"",onChange:function(e){!function(e,t){var a=Object(de.a)(r),n=O(t.target.value);a[e]={pagoString:t.target.value,total:n};var o=Object(q.a)({},l);o.totalPagos=a.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.total)||0}),0).toFixed(2),o.saldoActual=o.importePerla-o.totalPagos,localStorage.setItem("hojaPagos",JSON.stringify(o)),localStorage.setItem("pagos",JSON.stringify(a)),s(o),c(a)}(t,e)}})}),Object(h.jsx)(me.a,{children:Object(h.jsx)(u.a,{size:"small",variant:"standard",value:(null===(o=r[t])||void 0===o?void 0:o.total)?null===(i=r[t])||void 0===i?void 0:i.total:"",disabled:!0})})]},t)})),Object(h.jsxs)(Oe.a,{children:[Object(h.jsx)(me.a,{className:d.bodyCell,children:"TOTAL PAGOS"}),Object(h.jsx)(me.a,{className:d.inputCell,children:Object(h.jsx)(u.a,{size:"small",variant:"filled",value:l.totalPagos?l.totalPagos:"",disabled:!0})})]}),Object(h.jsxs)(Oe.a,{children:[Object(h.jsx)(me.a,{className:d.bodyCell,children:"PAGOS FALT\xd3"}),Object(h.jsx)(me.a,{className:d.inputCell,children:Object(h.jsx)(u.a,{size:"small",variant:"filled",name:"pagosFalto",value:l.pagosFalto,onChange:b})})]}),Object(h.jsxs)(Oe.a,{children:[Object(h.jsx)(me.a,{className:d.bodyCell,children:"POLLOS MUERTOS"}),Object(h.jsx)(me.a,{className:d.inputCell,children:Object(h.jsx)(u.a,{size:"small",variant:"filled",name:"pollosMuertos",value:l.pollosMuertos,onChange:b})})]}),Object(h.jsxs)(Oe.a,{children:[Object(h.jsx)(me.a,{className:d.bodyCell,children:"SALDO ANTERIOR PERLA"}),Object(h.jsx)(me.a,{className:d.inputCell,children:Object(h.jsx)(u.a,{size:"small",variant:"filled",name:"saldoAnterior",value:l.saldoAnterior,onChange:b})})]}),Object(h.jsxs)(Oe.a,{children:[Object(h.jsx)(me.a,{className:d.bodyCell,children:"CUENTA DEL DIA"}),Object(h.jsx)(me.a,{className:d.inputCell,children:Object(h.jsx)(u.a,{size:"small",variant:"filled",name:"importePerla",value:l.importePerla,onChange:b})})]}),Object(h.jsxs)(Oe.a,{children:[Object(h.jsx)(me.a,{className:d.bodyCell,children:"SALDO ACTUAL"}),Object(h.jsx)(me.a,{className:d.inputCell,children:Object(h.jsx)(u.a,{size:"small",variant:"filled",name:"saldoActual",value:l.saldoActual,disabled:!0})})]})]})]})})]})},Pe=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(ee,"/orderSheet?fecha=").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.post("".concat(ee,"/orderSheet"),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.put("".concat(ee,"/orderSheet/").concat(t.id),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke={total:0,queda:0},Ae=Object(b.a)((function(e){return{containerButtons:{display:"flex",gap:"20px"},table:{width:"790px"},row0:{backgroundColor:"#E7ECEF"},row1:{backgroundColor:"#E0F5EB"},row2:{backgroundColor:"#FAF5B2"},row3:{backgroundColor:"#B7D9F5"},bodyCell:{width:"200px"},inputCell:{width:"250px",padding:"0",margin:"0","& *":{padding:"5px",margin:"0",backgroundColor:"transparent"},"& .MuiFormControl-root.MuiTextField-root":{padding:"0"}}}})),Fe=function(){var e=function(){var e=je("active").clientes,t=Object(n.useState)(Object(q.a)({},ke)),a=Object(L.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)([]),i=Object(L.a)(o,2),l=i[0],s=i[1],d=Object(n.useContext)(p).fecha;return Object(n.useEffect)((function(){"aaaa-mm-dd"!==d&&Pe(d).then((function(e){0!==e.data.length?(c(e.data[0].hojaPedido),s(e.data[0].pedidos)):(localStorage.getItem("hojaPedido")&&c(Object(q.a)(Object(q.a)({},r),JSON.parse(localStorage.getItem("hojaPedido")))),localStorage.getItem("pedidos")&&s(Object(de.a)(JSON.parse(localStorage.getItem("pedidos")))))})).catch((function(){localStorage.getItem("hojaPedido")&&c(Object(q.a)(Object(q.a)({},r),JSON.parse(localStorage.getItem("hojaPedido")))),localStorage.getItem("pedidos")&&s(Object(de.a)(JSON.parse(localStorage.getItem("pedidos"))))}))}),[d]),{hojaPedido:r,pedidos:l,clientes:e,handlePedido:function(e,t){var a,n=function(e){var t=0;return e.trim().toLowerCase().split("+").forEach((function(e){var a=e.indexOf("m"),n=e.indexOf("h");-1!==a&&(t+=1*e.substring(0,a)),-1!==n&&(t+=1*e.substring(0,n))})),t}(t.target.value),o=0;o=1*r.queda-n,l[e]&&(o+=l[e].total),o>=0?(l[e]={pedidoString:t.target.value,total:n},c(Object(q.a)(Object(q.a)({},r),{},{queda:o})),localStorage.setItem("pedidos",JSON.stringify(l)),localStorage.setItem("hojaPedido",JSON.stringify(Object(q.a)(Object(q.a)({},r),{},{queda:o})))):t.target.value=(null===(a=l[e])||void 0===a?void 0:a.pedidoString)||0},handleTotal:function(e){if(1*e.target.value>=0){var t=1*e.target.value,a=t-r.total+r.queda;c(Object(q.a)(Object(q.a)({},r),{},{total:t,queda:a})),localStorage.setItem("hojaPedido",JSON.stringify(r))}},limpiarHoja:function(){localStorage.removeItem("hojaPedido"),localStorage.removeItem("pedidos"),c(Object(q.a)({},ke)),s([])},saveOnline:function(){var e={fecha:d,hojaPedido:r,pedidos:l};Pe(d).then((function(t){0===t.data.length?we(e):(e.id=t.data[0].id,Ie(e))}))}}}(),t=e.hojaPedido,a=e.pedidos,r=e.clientes,c=e.handlePedido,o=e.handleTotal,i=e.limpiarHoja,l=e.saveOnline,s=Ae(),d=Object(n.useRef)();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:s.containerButtons,children:[Object(h.jsx)(u.a,{label:"Total",value:0!==t.total?t.total:"",placeholder:"0",onChange:o,type:"number"}),Object(h.jsx)(u.a,{label:"Queda",value:0!==t.queda?t.queda:"",type:"number"}),Object(h.jsx)(R.a,{variant:"contained",color:"primary",onClick:i,children:"Limpiar Hoja"}),Object(h.jsx)(ye.a,{trigger:function(){return Object(h.jsx)(R.a,{variant:"contained",color:"primary",children:"Imprimir"})},content:function(){return d.current}}),Object(h.jsx)(R.a,{variant:"contained",color:"primary",onClick:l,children:"Guardar online"})]}),Object(h.jsx)(be.a,{ref:d,className:s.table,children:Object(h.jsxs)(pe.a,{size:"small","aria-label":"a dense table",children:[Object(h.jsx)(he.a,{children:Object(h.jsx)(Oe.a,{children:["Clientes","N\xb0 de jabas","Camal"].map((function(e){return Object(h.jsx)(me.a,{children:e},e)}))})}),Object(h.jsx)(xe.a,{children:r.map((function(e,t){var n,r;return Object(h.jsxs)(Oe.a,{className:s["row".concat(t%4)],children:[Object(h.jsx)(me.a,{className:s.bodyCell,children:e.nombre}),Object(h.jsx)(me.a,{className:s.inputCell,children:Object(h.jsx)(u.a,{size:"small",variant:"filled",value:void 0===(null===(n=a[t])||void 0===n?void 0:n.pedidoString)||null===(null===(r=a[t])||void 0===r?void 0:r.pedidoString)?"":a[t].pedidoString,onChange:function(e){c(t,e)}})}),Object(h.jsx)(me.a,{children:e.camal})]},t)}))})]})})]})},Ee=a(199),Je=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var a,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("orderSheetPdf",t),e.next=4,_.a.post("".concat(te,"/uploadOrderSheet"),a,{headers:{"Content-Type":"multipart/form-data"}});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.post("".concat(te,"/orderSheet"),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.post("".concat(te,"/saveOrders"),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le={orderDate:"",costPrice:"",nameArchive:""},ze=function(){var e=Object(n.useState)(Le),t=Object(L.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!0),o=Object(L.a)(c,2),i=o[0],l=o[1],s=Object(n.useState)({totalQuantity:0,totalWeight:0,totalCost:0}),d=Object(L.a)(s,2),j=d[0],b=d[1],p=Object(n.useState)([]),O=Object(L.a)(p,2),m=O[0],x=O[1],f=Object(n.useState)({text:"",active:!1}),g=Object(L.a)(f,2),v=g[0],y=g[1],C=Object(n.useRef)(),S=function(e){r(Object(q.a)(Object(q.a)({},a),{},Object(K.a)({},e.target.name,e.target.value)))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{width:"300px",display:"flex",flexDirection:"column",gap:"20px"},children:[v.active&&Object(h.jsx)(Ee.a,{severity:"error",children:v.text}),Object(h.jsx)(u.a,{label:"Fecha de pedido",type:"date",name:"orderDate",value:a.orderDate,InputLabelProps:{shrink:!0},onChange:S}),Object(h.jsx)(u.a,{label:"Precio de costo",type:"number",name:"costPrice",value:a.costPrice,onChange:S,InputLabelProps:{shrink:!0}}),Object(h.jsx)(u.a,{label:"Subir hoja de pedidos",type:"file",inputRef:C,InputLabelProps:{shrink:!0}}),Object(h.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){if(""!==a.orderDate&&""!==a.costPrice&&0!==C.current.files.length){y({text:"",active:!1});var e=C.current.files[0];Je(e).then((function(e){var t=e.data.nameArchive;r(Object(q.a)(Object(q.a)({},a),{},{nameArchive:t})),Te(Object(q.a)(Object(q.a)({},a),{},{nameArchive:t})).then((function(e){e.status&&(0===e.data.length?y({text:"Ocurrio un error, por favor inserte correctamente la fecha del pedido.",active:!0}):(localStorage.setItem("ordersOfOrdersSheet",JSON.stringify(e.data)),x(e.data.orders),b(e.data.data)))}))}))}else y({text:"Por favor inserte todos los datos.",active:!0})},children:"Importar pedidos"})]}),0!==m.length&&a.nameArchive&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(be.a,{children:Object(h.jsxs)(pe.a,{size:"small","aria-label":"a dense table",children:[Object(h.jsx)(he.a,{children:Object(h.jsx)(Oe.a,{children:["Nombre","Cantidad","KG","Precio","Nombre Programa"].map((function(e){return Object(h.jsx)(me.a,{children:e},e)}))})}),Object(h.jsxs)(xe.a,{children:[m.map((function(e,t){return Object(h.jsx)(Oe.a,{children:["customerName","quantity","weight","price","nombrePrograma"].map((function(a,n){return Object(h.jsx)(me.a,{children:e[a]},"column".concat(t).concat(n))}))},"row".concat(t))})),Object(h.jsxs)(Oe.a,{children:[Object(h.jsx)(me.a,{children:"Costo Total"}),Object(h.jsx)(me.a,{children:j.totalQuantity}),Object(h.jsx)(me.a,{children:j.totalWeight}),Object(h.jsx)(me.a,{children:j.totalCost})]})]})]})}),Object(h.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){l(!1),De({orders:m})},disabled:!i,children:"Guardar pedidos"})]})]})},qe=Object(b.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3)}}})),Re={nombre:"",importe:""},Be=function(){var e=V(Object(q.a)({},Re)),t=e.form,a=e.handleChange,n=e.limpiarForm;return Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"50px"},children:[Object(h.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[Object(h.jsx)(u.a,{label:"Nombre",value:t.nombre,onChange:a("nombre")}),Object(h.jsx)(u.a,{label:"Importe",value:t.importe,onChange:a("importe")})]}),Object(h.jsxs)(W.a,{variant:"outlined",style:{width:"450px",display:"flex",flexDirection:"column",gap:"8px",padding:"12px",borderRadius:"8px",borderColor:"#888"},children:[Object(h.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",justifyContent:"center",alignContent:"center"},children:[Object(h.jsx)(J.a,{color:"error",style:{height:"32px",width:"32px"}}),Object(h.jsx)("h2",{children:"Ocurrio un error"})]}),Object(h.jsx)("p",{style:{fontWeight:"bold"},children:"Descripci\xf3n del error:"}),Object(h.jsx)("p",{children:"No se puede crear el pedido, el cliente ".concat(t.nombre||""," tiene una deuda de S/.").concat(t.importe||"")}),Object(h.jsx)(R.a,{style:{alignSelf:"flex-end",marginTop:"6px"},onClick:n,children:"CERRAR"})]})]})},He=Object(o.a)({palette:{primary:{main:"#212121"},secondary:{main:"#fff"}}}),Me=function(){var e=qe();return Object(h.jsx)(i.a,{theme:He,children:Object(h.jsx)(z,{children:Object(h.jsx)(s.a,{children:Object(h.jsxs)("div",{className:e.root,children:[Object(h.jsx)(m,{}),Object(h.jsx)(D,{}),Object(h.jsxs)("div",{className:e.content,children:[Object(h.jsx)(l.a,{}),Object(h.jsxs)(d.c,{children:[Object(h.jsx)(d.a,{path:"/alerta",children:Object(h.jsx)(Be,{})}),Object(h.jsx)(d.a,{path:"/clientes",children:Object(h.jsx)(ge,{})}),Object(h.jsx)(d.a,{path:"/importarpedidos",children:Object(h.jsx)(ze,{})}),Object(h.jsx)(d.a,{path:"/pagos",children:Object(h.jsx)(Ne,{})}),Object(h.jsx)(d.a,{path:"/",children:Object(h.jsx)(Fe,{})})]})]})]})})})})};a(145);c.a.render(Object(h.jsx)(Me,{}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.7d5b6ba6.chunk.js.map